<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Aplicación Trabajo Paneles Solares</title>
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; background: #f0f4f7; padding: 25px; }
  .form-container { max-width: 720px; margin: auto; background: #ffffff; padding: 35px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
  .form-step { display: none; opacity: 0; transform: translateX(50px); transition: all 0.5s ease; }
  .form-step.active { display: block; opacity: 1; transform: translateX(0); }
  h2, h3 { text-align: center; color: #1f8f4a; font-weight: 600; }
  h3 { margin-top: 18px; margin-bottom: 12px; }
  label { display: block; margin-top: 12px; font-weight: 600; color: #333; }
  input, select, textarea { width: 100%; padding: 12px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
  textarea { resize: vertical; }
  button { margin-top: 20px; padding: 14px; width: 48%; background: #1f8f4a; color: white; border: none; font-size: 16px; cursor: pointer; border-radius: 6px; transition: background 0.3s; }
  button:hover { background: #166b38; }
  .btn-group { display: flex; justify-content: space-between; margin-top: 15px; }
  .error { color: red; font-size: 0.85em; display: none; margin-top: 2px; }
  .progress-bar { width: 100%; background: #ddd; border-radius: 8px; height: 12px; margin-bottom: 25px; overflow: hidden; }
  .progress { height: 100%; background: #1f8f4a; width: 0%; transition: width 0.4s ease; border-radius: 8px; }
</style>
</head>
<body>

<div class="form-container">
  <div class="progress-bar"><div class="progress" id="progress"></div></div>
  <form id="solarApp">

    <!-- STEP 1: Datos Personales -->
    <div class="form-step active">
      <h2>Información Personal</h2>
      <label>Nombre Completo</label>
      <input type="text" name="fullName" required>
      <span class="error">Debes completar este campo</span>

      <label>Fecha de Nacimiento</label>
      <input type="date" name="dob" required>
      <span class="error">Debes indicar tu fecha de nacimiento (18+)</span>

      <label>Email</label>
      <input type="email" name="email" required>
      <span class="error">Debes ingresar un email válido</span>

      <label>Teléfono</label>
      <input type="tel" name="phone" required>
      <span class="error">Debes ingresar tu número de teléfono</span>

      <label>Dirección Completa</label>
      <input type="text" name="address" required>
      <span class="error">Debes ingresar tu dirección</span>

      <div class="btn-group">
        <div></div>
        <button type="button" class="next-btn">Siguiente →</button>
      </div>
    </div>

    <!-- STEP 2: Posición y Experiencia -->
    <div class="form-step">
      <h2>Posición y Experiencia</h2>
      <label>Puesto al que aplicas</label>
      <select name="position" required>
        <option value="">Selecciona</option>
        <option>Instalador Solar</option>
        <option>Electricista</option>
        <option>Técnico de Techo</option>
        <option>Ayudante / Labor</option>
        <option>Supervisor</option>
      </select>
      <span class="error">Debes seleccionar un puesto</span>

      <label>Experiencia en paneles solares</label>
      <select name="experience" required>
        <option value="">Selecciona</option>
        <option>Sí</option>
        <option>No</option>
      </select>
      <span class="error">Debes seleccionar una opción</span>

      <label>Años de experiencia</label>
      <input type="number" name="yearsExperience" min="0" required>
      <span class="error">Debes indicar tus años de experiencia</span>

      <div class="btn-group">
        <button type="button" class="prev-btn">← Atrás</button>
        <button type="button" class="next-btn">Siguiente →</button>
      </div>
    </div>

    <!-- STEP 3: Disponibilidad y Contrato -->
    <div class="form-step">
      <h2>Disponibilidad y Contrato</h2>
      <label>¿Puedes cumplir un contrato de 9 meses?</label>
      <select name="contract" required>
        <option value="">Selecciona</option>
        <option>Sí</option>
        <option>No</option>
      </select>
      <span class="error">Debes seleccionar sí o no</span>

      <label>¿Puedes estar de pie durante turnos largos y subir a techos?</label>
      <select name="standing" required>
        <option value="">Selecciona</option>
        <option>Sí</option>
        <option>No</option>
      </select>
      <span class="error">Debes seleccionar sí o no</span>

      <label>Disponibilidad de tiempo</label>
      <select name="availability" required>
        <option value="">Selecciona</option>
        <option>Tiempo completo</option>
        <option>Medio tiempo</option>
        <option>Contrato temporal</option>
      </select>
      <span class="error">Debes seleccionar tu disponibilidad</span>

      <div class="btn-group">
        <button type="button" class="prev-btn">← Atrás</button>
        <button type="button" class="next-btn">Siguiente →</button>
      </div>
    </div>

    <!-- STEP 4: Legalidad y Transporte -->
    <div class="form-step">
      <h2>Legalidad y Transporte</h2>
      <label>¿Autorizado para trabajar en EE. UU.?</label>
      <select name="workAuth" required>
        <option value="">Selecciona</option>
        <option>Sí</option>
        <option>No</option>
      </select>
      <span class="error">Debes seleccionar sí o no</span>

      <label>¿Tienes transporte propio?</label>
      <select name="transportation" required>
        <option value="">Selecciona</option>
        <option>Sí</option>
        <option>No</option>
      </select>
      <span class="error">Debes seleccionar sí o no</span>

      <div class="btn-group">
        <button type="button" class="prev-btn">← Atrás</button>
        <button type="button" class="next-btn">Siguiente →</button>
      </div>
    </div>

    <!-- STEP 5: Documentos -->
    <div class="form-step">
      <h2>Documentos Requeridos</h2>
      <label>Documento de identificación (ID / Pasaporte, máximo 2MB)</label>
      <input type="file" name="idDocument" accept="image/*,.pdf" required>
      <span class="error">Debes subir tu documento (máx 2MB)</span>

      <label>Certificaciones / Licencias (si aplica, máximo 2MB)</label>
      <input type="file" name="certifications" accept="image/*,.pdf">

      <div class="btn-group">
        <button type="button" class="prev-btn">← Atrás</button>
        <button type="button" class="next-btn">Siguiente →</button>
      </div>
    </div>

    <!-- STEP 6: Información adicional y Firma -->
    <div class="form-step">
      <h2>Información Adicional y Firma</h2>
      <label>Notas / Comentarios (opcional)</label>
      <textarea name="notes" rows="4"></textarea>

      <label>Firma Digital (escribe tu nombre completo)</label>
      <input type="text" name="signature" required>
      <span class="error">Debes firmar con tu nombre</span>

      <label>
        <input type="checkbox" name="agree" required>
        Certifico que toda la información es verdadera
      </label>
      <span class="error">Debes aceptar</span>

      <div class="btn-group">
        <button type="button" class="prev-btn">← Atrás</button>
        <button type="submit">Enviar Aplicación</button>
      </div>
    </div>

  </form>
</div>

<script>
const form = document.getElementById('solarApp');
const steps = document.querySelectorAll('.form-step');
const progress = document.getElementById('progress');
let currentStep = 0;

function showStep(step) {
  steps.forEach((s,i)=>s.classList.toggle('active', i===step));
  progress.style.width = ((step+1)/steps.length)*100 + '%';
}

function validateStep(step) {
  let valid = true;
  const fields = steps[step].querySelectorAll('input, select, textarea');
  fields.forEach(field => {
    const error = field.nextElementSibling;
    if(field.hasAttribute('required') && !field.value) {
      valid = false;
      if(error) error.style.display='block';
    } else if(error) error.style.display='none';

    if(field.name==='dob' && field.value) {
      const dob = new Date(field.value);
      const age = (new Date() - dob)/(1000*60*60*24*365.25);
      if(age<18) { valid=false; error.textContent="Debes ser mayor de 18 años"; error.style.display='block'; }
      else if(error) error.style.display='none';
    }

    if(field.type==='file' && field.files.length>0) {
      if(field.files[0].size>2*1024*1024) { valid=false; error.textContent="Archivo demasiado grande (máx 2MB)"; error.style.display='block'; }
    }
  });
  return valid;
}

document.querySelectorAll('.next-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    if(validateStep(currentStep)) { currentStep++; showStep(currentStep); }
    else alert('Por favor completa correctamente todos los campos antes de continuar.');
  });
});

document.querySelectorAll('.prev-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{ currentStep--; showStep(currentStep); });
});

form.addEventListener('submit', e=>{
  e.preventDefault();
  if(validateStep(currentStep)) {
    alert('Aplicación completada con éxito. Todos los campos fueron llenados correctamente.');
    form.reset();
    currentStep=0; showStep(currentStep);
  } else alert('Por favor completa todos los campos obligatorios.');
});

showStep(currentStep);
</script>

</body>
</html>